<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta charset="UTF-8">
<title>Slothy</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
<script type="text/javascript" src="/javascripts/application.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
</head>
<body>



<div id = "body2">
<button onclick="start_game()" id = "button">Start Game</button>
<button onclick="restart()" id = "button2">restart</button>
<p id = "score"> </p>
<p id = "def"></p>
<p id = "def2"> </p>
<p id = "def3"> </p>
<p id = "def4"> </p>
<div id = 'character'></div>
</div>


<script>






function start_game() {


  var character = {
    x: 300,
    y: 380,
    speedMultiplier: 4,
    element: document.getElementById("character")
  };

    var iDiv = "div";
    var div = document.createElement(iDiv);
    div.id = "apex"
    document.getElementById('body2').appendChild(div);


    // var rain = document.getElementById('body2')[0].appendChild(iDiv);
    // var teeqo = document.getElementById('body2')[0].appendChild(iDiv);
    // var adapt = document.getElementById('body2')[0].appendChild(iDiv);

function animate1(player, x) {
  document.getElementById(player).style.backgroundColor = "pink";
    var elem = document.getElementById(player);
 var pos = x;
 var id = setInterval(frame, 9);
 function frame() {
   if (pos == 550) {
     clearInterval(id);
     var id = setInterval(left, 9);
     function left() {
       if (pos == 0) {
         clearInterval(id);
         var id = setInterval(frame, 9);
       }
       else {
         pos -= 1;
         elem.style.left = pos + 'px';
       }
     }
   } else {
     pos++;
     elem.style.left = pos + 'px';
   }
 }
}
animate1("apex", 0);
// if (pos == 800) {
// var id = setInterval(frame2, 9);
// }

 // function frame2() {
 //   if (pos == 0) {
 //     clearInterval(id)
 //     animate1()
 //   } else {
 //     pos -= 1;
 //     elem.style.left = pos + 'px';
 //   }
 // }


  document.getElementById("button").style.display = "none";
  document.getElementById("character").style.display = "block";

  var keys = {};
          keys.UP = 38;
          keys.LEFT = 37;
          keys.RIGHT = 39;
          keys.DOWN = 40;
          keys.W = 87;
          keys.A = 65;
          keys.D = 68;
          keys.S = 83;

      /// store reference to character's position and element


      /// key detection (better to use addEventListener, but this will do)
      document.body.onkeyup =
      document.body.onkeydown = function(e){
        /// prevent default browser handling of keypresses
        if (e.preventDefault) {
          e.preventDefault();
        }
        else {
          e.returnValue = false;
        }
        var kc = e.keyCode || e.which;
        keys[kc] = e.type == 'keydown';
      };

      /// character movement update
      var moveCharacter = function(dx, dy){
        character.x += (dx||0) * character.speedMultiplier;
        character.y += (dy||0) * character.speedMultiplier;
        character.element.style.left = character.x + 'px';
        character.element.style.top = character.y + 'px';
      };

      /// character control
      var detectCharacterMovement = function(){

         if ( keys[keys.A] ) {
          moveCharacter(-1, 0);
        }
        if ( keys[keys.D] ) {
          moveCharacter(1, 0);
        }
      };


      /// update current position on screen
      moveCharacter();

      /// game loop
      setInterval(function(){
        detectCharacterMovement();
      }, 1000/24);

  function getPosition() {

    var elem   = document.getElementById("character");
  var top = getComputedStyle(elem).getPropertyValue("top");

  getPosition()
  }
  getPosition()


}

function restart() {
  document.location.href = "";
}

</script>

</body>
</html>
